# AI Universal Service Orchestrator - Environment Variables
# Copy to .env and fill in values. Never commit .env to git.

# =============================================================================
# Database (Supabase)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
# Publishable key (client-side, RLS) - format: sb_publishable_...
# Legacy anon key (eyJ...) is deprecated; migrate before Nov 2025
SUPABASE_PUBLISHABLE_KEY=sb_publishable_...
# Secret key (server-side, bypasses RLS) - format: sb_secret_...
# Legacy service_role key (eyJ...) is deprecated; migrate before Nov 2025
SUPABASE_SECRET_KEY=sb_secret_...
# Orchestrator / Webhook services (same as SUPABASE_SECRET_KEY)
# SUPABASE_SERVICE_KEY=sb_secret_...

# Optional: Direct Postgres connection (for migrations, pooling)
# SUPABASE_DB_URL=postgresql://postgres.[ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# =============================================================================
# Authentication (Clerk)
# =============================================================================
CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
CLERK_WEBHOOK_SECRET=whsec_...

# Link Account - Google OAuth (verify id_token; required for POST /api/v1/link-account with provider=google)
GOOGLE_OAUTH_CLIENT_ID=...apps.googleusercontent.com

# =============================================================================
# AI / LLM (Platform Config)
# =============================================================================
# LLM and image providers (Azure, OpenAI, Gemini, OpenRouter, Custom) are configured via Platform Config UI.
# Add providers at /platform/config and set one as active for chat and one for image generation (e.g. DALL-E 3).

# Encrypt API keys stored in llm_providers. Use 32+ chars. Required in production.
# LLM_CONFIG_ENCRYPTION_KEY=your-32-byte-hex-or-long-secret

# Groq / OSS LLM (env-based) – used by Orchestrator planner when set (takes precedence over Platform Config)
# Set these in .env at repo root (or in the environment where the orchestrator runs).
# OSS_ENDPOINT=https://api.groq.com/openai
# GROQ_API_KEY=gsk_...
# GROQ_MODEL=llama-3.1-70b-versatile
# Optional: OSS_API_KEY and OSS_MODEL are aliases; LLM_PRIMARY=oss (default when OSS_ENDPOINT set)

# =============================================================================
# Messaging (Twilio - WhatsApp, SMS)
# =============================================================================
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_WHATSAPP_NUMBER=+14155238886

# Webhook Push Bridge (for ChatGPT/Gemini/WhatsApp push)
# =============================================================================
# CHATGPT_WEBHOOK_URL=https://...  # Optional
# GEMINI_WEBHOOK_URL=https://...   # Optional
# Webhook service (for thread mapping + Durable Functions push)
# WEBHOOK_SERVICE_URL=http://localhost:8003

# =============================================================================
# Cache (Upstash Redis)
# =============================================================================
UPSTASH_REDIS_REST_URL=https://...
UPSTASH_REDIS_REST_TOKEN=...

# =============================================================================
# Payments (Stripe)
# =============================================================================
# From Dashboard -> API keys: Publishable key (pk_...) and Secret key (sk_...)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
# Optional: Signing secret (whsec_...) from Dashboard -> Webhooks -> Add endpoint
# STRIPE_WEBHOOK_SECRET=whsec_...

# =============================================================================
# Azure (Optional - for production)
# =============================================================================
# AZURE_KEY_VAULT_URL=https://your-vault.vault.azure.net/
# AZURE_STORAGE_CONNECTION_STRING=...
# AZURE_SERVICE_BUS_CONNECTION_STRING=...
# APPLICATION_INSIGHTS_CONNECTION_STRING=...

# =============================================================================
# Application
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO
API_BASE_URL=http://localhost:8000

# Server-based testing (pytest -m server)
# DISCOVERY_SERVICE_URL=https://discovery-staging.example.com

# Orchestrator service (Intent → Discovery)
# INTENT_SERVICE_URL=http://localhost:8001
# DISCOVERY_SERVICE_URL=http://localhost:8000

# Full implementation services
# PAYMENT_SERVICE_URL=http://localhost:8006
# OMNICHANNEL_BROKER_URL=http://localhost:8004
# RE_SOURCING_SERVICE_URL=http://localhost:8005
# Orchestrator auxiliary (manifest, order status, classify-support, returns)
# HYBRID_RESPONSE_SERVICE_URL=http://localhost:8010
# REVERSE_LOGISTICS_SERVICE_URL=http://localhost:8011

# Durable Orchestrator (Azure Functions - for long-running workflows)
# DURABLE_ORCHESTRATOR_URL=http://localhost:7071
