{% extends "base.html" %}
{% block title %}Analytics - {{ partner.business_name }}{% endblock %}

{% block content %}
<h1>{{ partner.business_name }} - Analytics</h1>
<p>Sales overview and performance metrics.</p>

<h2>Sales Summary</h2>
<div class="analytics-summary" style="padding:var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);margin:var(--spacing-md) 0;">
    <div style="font-size:1.2em;">Total sales: <strong>${{ (total_sales_cents or 0) / 100 }}</strong></div>
    <div style="font-size:0.9em;color:var(--color-text-secondary);">{{ commissions|length }} orders</div>
</div>

<h2>Recent Orders</h2>
<table style="width:100%;border-collapse:collapse;margin-top:var(--spacing-md);">
    <thead>
        <tr>
            <th style="padding:var(--spacing-sm);text-align:left;border-bottom:1px solid var(--color-border);">Order</th>
            <th style="padding:var(--spacing-sm);text-align:left;border-bottom:1px solid var(--color-border);">Status</th>
            <th style="padding:var(--spacing-sm);text-align:left;border-bottom:1px solid var(--color-border);">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for item in orders[:20] %}
        <tr>
            <td style="padding:var(--spacing-sm);border-bottom:1px solid var(--color-border);">{{ item.order_id[:8] }}...</td>
            <td style="padding:var(--spacing-sm);border-bottom:1px solid var(--color-border);">{{ item.leg.status }}</td>
            <td style="padding:var(--spacing-sm);border-bottom:1px solid var(--color-border);">{{ item.order.created_at[:19] if item.order.created_at else '-' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="3" style="padding:var(--spacing-md);color:var(--color-text-secondary);">No orders yet.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
